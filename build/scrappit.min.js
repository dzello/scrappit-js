/*
 scrappit.js
 http://scrappit.org
 Available via the MIT License
 Author: Josh Dzielak, Copyright (c) 2011
*/(function(a,b,c){function n(a){return j.call(a)==="[object Function]"}function o(a){return j.call(a)==="[object Array]"}function p(a){return j.call(a)==="[object Object]"}function q(a){var b=o(a)?[]:{};for(i in a)a[i]&&p(a[i])?b[i]=q(a[i]):b[i]=a[i];return b}function r(a){k&&n(k.warn)&&k.warn(a)}function s(){return++f+(new Date).getTime().toString().slice(5)}function v(b){if(b.define&&b.define.amd)return;var c;l&&l.define&&l.define.amd?c=l:c=a,c.define&&c.define.amd&&(b.define=c.define,b.require=c.require,b.requirejs=c.requirejs)}function w(a){if(m){for(var b=0;b<m.length;b++){var c=m[b];n(c)?c():p(c)&&a.define&&a.require(c)}l.readyQueue=[]}}function x(b){a[e]=b;try{define(function(){return b})}catch(c){}}function y(){var a,b=n(l);b?a=l:a=u(),v(a),b||x(a),setTimeout(function(){w(a)},0)}var d="0.1.0+",e="scrappit",f=0,g=undefined,h=""+g,j=Object.prototype.toString,k=b.console,l=a[e],m=l&&l.readyQueue,t=function(){function b(){return(++a).toString()}function c(a,b,c,d){if(!a.hasOwnProperty(b))return!1;var e=function(){var d=q(a[b]);for(var e=0,f=d.length;e<f;e++){var g=d[e];g&&g.func(c)}};return d===!0?e():setTimeout(e,0),!0}function d(a,c,d){a.hasOwnProperty(c)||(a[c]=[]);var e=b();return a[c].push({token:e,func:d}),e}function e(a,b){for(var c in a)if(a.hasOwnProperty(c))for(var d=0,e=a[c].length;d<e;d++)if(a[c][d].token===b)return a[c].splice(d,1),!0;return!1}var a=-1;return function(a){var b=a.messages={};a.publish=function(a,d){return c(b,a,d,!1)},a.publishSync=function(a,d){return c(b,a,d,!0)},a.subscribe=function(a,c){return d(b,a,c)},a.unsubscribe=function(a){return e(b,a)}}}(),u=function(){function c(a){d(a),b.publishSync("beforeLaunch.scrapp",a),f(a)}function d(a){function f(){a.unsubscribe(c),b.unsubscribe(d)}a._uid=a._uid||a.id||s(),a._deps_context=e+"/"+a._uid+"/deps",t(a),a.requireDeps=function(c,d,e){if(b.define){var f=a._deps_context;p(c)?c.context=f:(e=d,d=c,c={}),c.context=f,b.require(c,d,e)}},a.applyArgsAndLaunch=function(){var b=arguments,c=a.launch;a.launch=function(){c.apply(a,b)},a.onDependenciesReady()},a.onDependenciesReady=function(){h(a)},a.close=function(){a.publish("close")};var c,d;c=a.subscribe("close",function(){f(),b.publish("close.scrapp",a)}),d=b.subscribe("close",function(b){f(),a.close()})}function f(a){if(a.require){if(b.define){var c={},d,e=a.applyArgsAndLaunch;p(a.require)?(c=a.require,c.callback||(c.callback=e)):d=a.require,a.requireDeps(c,d,e)}}else a.onDependenciesReady();return a}function h(a){try{a.launch(),b.publish("launch.scrapp",a)}catch(c){k&&(k.error("The launch method of this scrapp threw an exception:"),k.error(a),k.error(c))}}function i(){b._uid=s(),t(b),b.close=function(){b.publish("close",b),a[e]=g},b.readyQueue=[]}var b=function(a){return c(a)};return i(),b};y()})(this,window,document)